{
    "type": "object",
    "properties": {
        "StackPrefix": {"type": "string"},
        "TemplateUrl": {
            "type": "string",
            "format": "uri",
            "pattern": "^https://[a-zA-Z0-9.-]+\\.s3\\.[a-zA-Z0-9-]+\\.amazonaws\\.com/[a-zA-Z0-9/._-]+\\.yaml$"
        },
        "RoleToAssume": {
            "type": "string",
            "pattern": "^[a-zA-Z0-9+=,.@_-]{1,64}$"
        },
        "Create": {
            "type": "object",
            "properties": {
                "Include": {
                    "type": "object",
                    "properties": {
                        "Accounts": {
                            "type": "array",
                            "items": {"type": "string", "pattern": "^\\d{12}$"}
                        },
                        "OUs": {
                            "type": "array",
                            "items": {"type": "string", "pattern": "^(ou-[a-zA-Z0-9_-]{4,32}|r-[a-z]{4})$"}
                        },
                        "Tags": {
                            "type": "object",
                            "patternProperties": {
                                "^[a-zA-Z0-9_-]+$": {"type": "string", "pattern": "^[a-zA-Z0-9_-]+$"}
                            },
                            "additionalProperties": false
                        }
                    },
                    "anyOf": [
                        {"required": ["Accounts"]},
                        {"required": ["OUs"]},
                        {"required": ["Tags"]}
                    ],
                    "additionalProperties": false
                },
                "Exclude": {
                    "type": "object",
                    "properties": {
                        "Accounts": {
                            "type": "array",
                            "items": {"type": "string", "pattern": "^\\d{12}$"}
                        },
                        "OUs": {
                            "type": "array",
                            "items": {"type": "string", "pattern": "^(ou-[a-zA-Z0-9_-]{4,32}|r-[a-z]{4})$"}
                        },
                        "Tags": {
                            "type": "object",
                            "patternProperties": {
                                "^[a-zA-Z0-9_-]+$": {"type": "string", "pattern": "^[a-zA-Z0-9_-]+$"}
                            },
                            "additionalProperties": false
                        }
                    },
                    "anyOf": [
                        {"required": ["Accounts"]},
                        {"required": ["OUs"]},
                        {"required": ["Tags"]}
                    ],
                    "additionalProperties": false
                },
                "Parameters": {"type": "object"},
                "Tags": {
                    "type": "object",
                    "patternProperties": {
                        "^[a-zA-Z0-9_-]+$": {"type": "string", "pattern": "^[a-zA-Z0-9_-]+$"}
                    },
                    "additionalProperties": false
                },
                "additionalProperties": false
            },
            "additionalProperties": false
        },
        "Delete": {
            "type": "object",
            "properties": {
                "Include": {
                    "type": "object",
                    "properties": {
                        "Accounts": {
                            "type": "array",
                            "items": {"type": "string", "pattern": "^\\d{12}$"}
                        },
                        "OUs": {
                            "type": "array",
                            "items": {"type": "string", "pattern": "^(ou-[a-zA-Z0-9_-]{4,32}|r-[a-z]{4})$"}
                        },
                        "Tags": {
                            "type": "object",
                            "patternProperties": {
                                "^[a-zA-Z0-9_-]+$": {"type": "string", "pattern": "^[a-zA-Z0-9_-]+$"}
                            },
                            "additionalProperties": false
                        }
                    },
                    "anyOf": [
                        {"required": ["Accounts"]},
                        {"required": ["OUs"]},
                        {"required": ["Tags"]}
                    ],
                    "additionalProperties": false
                },
                "Exclude": {
                    "type": "object",
                    "properties": {
                        "Accounts": {
                            "type": "array",
                            "items": {"type": "string", "pattern": "^\\d{12}$"}
                        },
                        "OUs": {
                            "type": "array",
                            "items": {"type": "string", "pattern": "^(ou-[a-zA-Z0-9_-]{4,32}|r-[a-z]{4})$"}
                        },
                        "Tags": {
                            "type": "object",
                            "patternProperties": {
                                "^[a-zA-Z0-9_-]+$": {"type": "string", "pattern": "^[a-zA-Z0-9_-]+$"}
                            },
                            "additionalProperties": false
                        }
                    },
                    "anyOf": [
                        {"required": ["Accounts"]},
                        {"required": ["OUs"]},
                        {"required": ["Tags"]}
                    ],
                    "additionalProperties": false
                }
            },
            "additionalProperties": false
        },
        "contextDetails": {
            "type": "object",
            "properties": {
                "arn": {
                    "type": "string",
                    "pattern": "^arn:aws:states:[a-zA-Z0-9-]+:\\d{12}:execution:[a-zA-Z0-9-_]+:[a-zA-Z0-9-]+$"
                }
            },
            "required": ["arn"],
            "additionalProperties": false
        }
    },
    "required": ["StackPrefix", "TemplateUrl", "RoleToAssume", "contextDetails"],
    "oneOf": [
        {"required": ["Create"]},
        {"required": ["Delete"]}
    ],
    "additionalProperties": false
}
