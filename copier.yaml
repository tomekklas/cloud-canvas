# copier.yml

_min_copier_version: 9.1.0

# Questionnaire
module_name:
  type: str
  help: Choose a descriptive name for the module.
  validator: >-
    {% if not (module_name | regex_search('^(?! *$)(?!deployment$).+$')) %}
    Module name can not start or end with a space. "Deployment" word is reserved and can not be used.
    {% endif %}

# TODO: on re-generatin this remembers previous invokation value, not current one 
module_directory_name:
  type: str
  default: "{{ module_name | replace(' ', '-') | regex_replace('[^a-zA-Z0-9-]', '') | lower }}"
  help: Please provide module directory name (suggested based on previous answer)

_tasks:
  - |
    if [ -f ".copier-answers.yml" ]; then
        if [ ! -d ".copier" ]; then
            mkdir ".copier"
        fi
        mv .copier-answers.yml ".copier/{{module_directory_name}}.yml"
    else
        echo "No answers file found to rename."
    fi

