StartAt: ExtractContextDetails

States:

  ExtractContextDetails:
    Type: Pass
    Parameters:
      arn.$: $$.Execution.Id
    ResultPath: $.contextDetails
    Comment: Extract the execution ARN and store in contextDetails.
    Next: Validate input

  Validate input:
    Type: Task
    Resource: arn:aws:states:::lambda:invoke
    Parameters:
      Payload.$: $
      FunctionName: ${ValidateInputLambda}
    OutputPath: $.Payload
    Retry:
      - ErrorEquals:
          - Lambda.ServiceException
          - Lambda.AWSLambdaException
          - Lambda.SdkClientException
          - Lambda.TooManyRequestsException
        IntervalSeconds: 2
        MaxAttempts: 6
        BackoffRate: 2
    Comment: Invoke Lambda to validate input. Retry on specific Lambda errors. Catch validation errors.